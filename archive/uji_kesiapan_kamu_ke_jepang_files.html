<!-- FILE: index.html -->
<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Uji Kesiapan Kamu ke Jepang</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-fun">
  <main id="app">
    <header>
      <h1>Uji Kesiapan Kamu ke Jepang</h1>
      <p class="tagline">Bisakah kamu bertahan hidup di Jepang?</p>
    </header>

    <section id="main-menu" class="centered">
      <div class="buttons big">
        <button id="btnMulai" class="main-btn">Mulai</button>
        <button id="btnStatus" class="main-btn">Status</button>
        <button id="btnLevel" class="main-btn">Level <span id="currentLevelText">(Belum pernah ke Jepang)</span></button>
        <button id="btnSettings" class="main-btn">Settings</button>
      </div>
    </section>

    <!-- Category selection (appears after Mulai) -->
    <section id="category-menu" class="centered hidden">
      <div class="category-grid">
        <button class="category-btn" data-cat="restoran">Restoran</button>
        <button class="category-btn" data-cat="minimarket">Minimarket</button>
        <button class="category-btn" data-cat="kereta">Kereta</button>
        <button class="category-btn" data-cat="rumah-sakit">Rumah sakit</button>
      </div>
      <button id="btnKembaliHomeFromCategory" class="back-btn">Kembali ke Home</button>
    </section>

    <!-- Quiz page -->
    <section id="quiz-page" class="centered hidden">
      <div class="quiz-card">
        <div class="top-row">
          <div id="questionNumber">Soal 1 / 10</div>
          <div id="progressWrap"><div id="progressBar"></div></div>
        </div>
        <h2 id="questionText">Pertanyaan akan muncul di sini</h2>
        <div id="answers" class="answers-grid"></div>
        <div class="feedback-area hidden" id="feedbackPopup">
          <div id="feedbackText"></div>
          <div id="feedbackExplanation"></div>
          <button id="nextQ">Next</button>
        </div>
      </div>
      <button id="btnKembaliHomeFromQuiz" class="back-btn">Kembali ke Home</button>
    </section>

    <!-- Results page -->
    <section id="results-page" class="centered hidden">
      <div class="results-card">
        <h2 id="resultsTitle"></h2>
        <p id="resultsSub"></p>
        <div id="resultsEmote" class="emote"></div>
        <div class="results-summary">Skor: <span id="resultsScore">0</span>/10</div>
        <button id="btnSaveResult" class="main-btn">Simpan Hasil</button>
        <button id="btnBackFromResults" class="back-btn">Kembali ke Home</button>
      </div>
    </section>

    <!-- Status page -->
    <section id="status-page" class="centered hidden">
      <div class="status-card">
        <h2>Status Kamu</h2>
        <div>Jumlah percobaan: <span id="attemptCount">0</span></div>
        <div>Skor rata-rata: <span id="averageScore">0</span></div>
        <canvas id="statusChart" style="max-width:600px"></canvas>
        <div class="status-actions">
          <button id="btnDeleteResults" class="danger">Hapus Semua Hasil</button>
          <button id="btnBackFromStatus" class="back-btn">Kembali</button>
        </div>
      </div>
    </section>

    <!-- Settings page -->
    <section id="settings-page" class="centered hidden">
      <div class="settings-card">
        <h2>Settings</h2>
        <label>Theme:</label>
        <select id="themeSelect">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="fun" selected>Fun</option>
        </select>
        <label>Sounds:</label>
        <select id="soundSelect">
          <option value="on" selected>On</option>
          <option value="off">Off</option>
        </select>
        <label>Notifications:</label>
        <select id="notifSelect">
          <option value="on">On</option>
          <option value="off" selected>Off</option>
        </select>

        <div class="settings-actions">
          <button id="btnSaveSettings" class="main-btn">Simpan</button>
          <button id="btnBackFromSettings" class="back-btn">Kembali</button>
        </div>
      </div>
    </section>

    <!-- Overlay / Modals -->
    <div id="overlay" class="overlay hidden"></div>

    <div id="levelModal" class="modal hidden">
      <h3>Pilih Level</h3>
      <div class="modal-grid">
        <button class="level-option" data-level="belum">Belum pernah ke Jepang</button>
        <button class="level-option" data-level="pernah">Pernah ke Jepang</button>
        <button class="level-option" data-level="sering">Sering ke Jepang</button>
      </div>
    </div>

    <audio id="sfxClick" src="assets/sounds/click.mp3"></audio>
    <audio id="sfxCorrect" src="assets/sounds/correct.mp3"></audio>
    <audio id="sfxWrong" src="assets/sounds/wrong.mp3"></audio>

    <!-- Ads placeholder -->
    <div id="adBar">[Iklan] (letakkan ads di folder assets/ad-placeholder.png)</div>

    <script src="script.js"></script>
  </main>
</body>
</html>



<!-- FILE: styles.css -->
:root{
  --bg:#fff;
  --card:#fff;
  --text:#111;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto}
body.theme-fun{
  background: linear-gradient(120deg,#ffedbc,#ffd1ff,#cbe7ff);
  background-size:600% 600%;
  animation: gradientBG 12s ease infinite;
  color:#222;
}
@keyframes gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.centered{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px}
header{margin-top:8vh;text-align:center}
h1{font-size:2rem;margin:0}
.tagline{margin:6px 0 24px;color:#333}
.buttons.big{display:flex;gap:12px;transform:scale(1.05)}
.main-btn{padding:18px 26px;border-radius:16px;border:none;font-size:1.05rem;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.12);transition:transform .12s ease}
.main-btn:active{transform:scale(.98)}
.hidden{display:none}
button.back-btn{margin-top:18px;background:transparent;border:2px dashed rgba(0,0,0,0.08);padding:10px 18px;border-radius:12px}
.category-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
.category-btn{padding:20px;border-radius:12px;border:none;font-weight:600;cursor:pointer;transform:scale(1.1)}
.quiz-card{width:min(760px,94%);background:rgba(255,255,255,0.85);backdrop-filter:blur(6px);padding:18px;border-radius:16px;box-shadow:0 12px 30px rgba(0,0,0,0.12)}
.answers-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:14px}
.answer-btn{padding:12px;border-radius:10px;border:2px solid rgba(0,0,0,0.06);cursor:pointer}
.feedback-area{position:relative;margin-top:12px;padding:12px;border-radius:12px;background:rgba(0,0,0,0.05)}
#progressWrap{width:40%;height:12px;background:rgba(0,0,0,0.06);border-radius:999px;overflow:hidden}
#progressBar{height:12px;width:0;background:linear-gradient(90deg,#7ef2a1,#5ad0ff);}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);z-index:40}
.modal{position:fixed;left:50%;top:40%;transform:translate(-50%,-40%);background:white;padding:18px;border-radius:12px;z-index:50;min-width:320px}
.level-option{display:block;width:100%;padding:12px;margin:8px 0;border-radius:10px}
#adBar{position:fixed;bottom:0;left:0;right:0;height:64px;background:rgba(0,0,0,0.06);display:flex;align-items:center;justify-content:center}
.status-card, .settings-card, .results-card{padding:16px;border-radius:12px;background:rgba(255,255,255,0.9);width:min(720px,95%)}
.danger{background:#ffcccc;border:none;padding:10px;border-radius:10px}
.emote{font-size:3rem;margin-top:8px}
/* Buttons colours for fun theme */
body.theme-fun .main-btn{background:linear-gradient(90deg,#ffb3c6,#ffd17a);}
body.theme-fun .category-btn:nth-child(1){background:#ffd2e2}
body.theme-fun .category-btn:nth-child(2){background:#d7f7d7}
body.theme-fun .category-btn:nth-child(3){background:#d7ecff}
body.theme-fun .category-btn:nth-child(4){background:#fff1d6}

/* Adaptivity */
@media (max-width:600px){h1{font-size:1.6rem}.buttons.big{flex-direction:column}}



<!-- FILE: script.js -->
/* Main script for quiz app */
const dbUrl = './db.json';
let appState = {
  level: 'belum', // default
  category: null,
  questions: [],
  currentIndex: 0,
  score: 0,
  sfxOn: true
};

// elements
const mainMenu = document.getElementById('main-menu');
const btnMulai = document.getElementById('btnMulai');
const btnStatus = document.getElementById('btnStatus');
const btnLevel = document.getElementById('btnLevel');
const btnSettings = document.getElementById('btnSettings');
const currentLevelText = document.getElementById('currentLevelText');
const overlay = document.getElementById('overlay');
const levelModal = document.getElementById('levelModal');
const categoryMenu = document.getElementById('category-menu');
const quizPage = document.getElementById('quiz-page');
const resultsPage = document.getElementById('results-page');
const statusPage = document.getElementById('status-page');
const settingsPage = document.getElementById('settings-page');
const answersWrap = document.getElementById('answers');
const questionText = document.getElementById('questionText');
const questionNumber = document.getElementById('questionNumber');
const progressBar = document.getElementById('progressBar');
const feedbackPopup = document.getElementById('feedbackPopup');
const feedbackText = document.getElementById('feedbackText');
const feedbackExplanation = document.getElementById('feedbackExplanation');
const nextQ = document.getElementById('nextQ');
const btnKembaliHomeFromQuiz = document.getElementById('btnKembaliHomeFromQuiz');
const btnBackFromResults = document.getElementById('btnBackFromResults');
const btnSaveResult = document.getElementById('btnSaveResult');
const resultsTitle = document.getElementById('resultsTitle');
const resultsSub = document.getElementById('resultsSub');
const resultsEmote = document.getElementById('resultsEmote');
const resultsScore = document.getElementById('resultsScore');
const btnDeleteResults = document.getElementById('btnDeleteResults');
const attemptCount = document.getElementById('attemptCount');
const averageScore = document.getElementById('averageScore');
const statusChartEl = document.getElementById('statusChart');
const themeSelect = document.getElementById('themeSelect');
const soundSelect = document.getElementById('soundSelect');
const notifSelect = document.getElementById('notifSelect');
const btnSaveSettings = document.getElementById('btnSaveSettings');
const btnBackFromSettings = document.getElementById('btnBackFromSettings');
const sfxClick = document.getElementById('sfxClick');
const sfxCorrect = document.getElementById('sfxCorrect');
const sfxWrong = document.getElementById('sfxWrong');
const adBar = document.getElementById('adBar');

// helpers
function playSfx(el){ if(!appState.sfxOn) return; try{ el.currentTime=0; el.play(); }catch(e){} }

// initialize
function init(){
  loadSettings();
  bindMainMenu();
  updateLevelText();
}

function bindMainMenu(){
  btnLevel.addEventListener('click',openLevelModal);
  document.querySelectorAll('.level-option').forEach(b=>b.addEventListener('click',chooseLevel));

  btnMulai.addEventListener('click',()=>{
    playSfx(sfxClick);
    hideMainButtons();
    categoryMenu.classList.remove('hidden');
  });
  document.querySelectorAll('.category-btn').forEach(b=>b.addEventListener('click',chooseCategory));

  btnStatus.addEventListener('click',()=>{
    playSfx(sfxClick);
    hideMainButtons();
    showStatus();
  });
  btnSettings.addEventListener('click',()=>{
    playSfx(sfxClick);
    hideMainButtons();
    showSettings();
  });

  document.getElementById('btnKembaliHomeFromCategory').addEventListener('click',goHome);
  btnKembaliHomeFromQuiz.addEventListener('click',goHome);
  btnBackFromResults.addEventListener('click',goHome);
  document.getElementById('btnBackFromStatus').addEventListener('click',goHome);
  document.getElementById('btnBackFromSettings').addEventListener('click',()=>{closeSettings();goHome();});

  nextQ.addEventListener('click',goToNextQuestion);
  btnSaveResult.addEventListener('click',saveResultAndGoStatus);
  btnDeleteResults.addEventListener('click',deleteAllResults);
  btnSaveSettings.addEventListener('click',saveSettingsAndApply);
}

function openLevelModal(){
  overlay.classList.remove('hidden');
  levelModal.classList.remove('hidden');
}
function closeLevelModal(){
  overlay.classList.add('hidden');
  levelModal.classList.add('hidden');
}

function chooseLevel(e){
  const lv = e.target.dataset.level;
  appState.level = lv;
  updateLevelText();
  closeLevelModal();
}

function updateLevelText(){
  const txt = appState.level === 'belum' ? 'Belum pernah ke Jepang' : appState.level === 'pernah' ? 'Pernah ke Jepang' : 'Sering ke Jepang';
  currentLevelText.textContent = `(${txt})`;
}

function hideMainButtons(){
  document.querySelectorAll('#main-menu .main-btn').forEach(b=>b.classList.add('hidden'));
}
function showMainButtons(){
  document.querySelectorAll('#main-menu .main-btn').forEach(b=>b.classList.remove('hidden'));
}

function goHome(){
  // hide everything else
  categoryMenu.classList.add('hidden');
  quizPage.classList.add('hidden');
  resultsPage.classList.add('hidden');
  statusPage.classList.add('hidden');
  settingsPage.classList.add('hidden');
  showMainButtons();
}

async function chooseCategory(e){
  playSfx(sfxClick);
  appState.category = e.target.dataset.cat;
  // fetch questions
  await loadQuestions();
  startQuiz();
}

async function loadQuestions(){
  const res = await fetch(dbUrl);
  const db = await res.json();
  const key = `${appState.level}_${appState.category}`;
  let pool = db[key] || [];
  pool = shuffle(pool).slice(0,10); // 10 questions
  appState.questions = pool;
}

function startQuiz(){
  categoryMenu.classList.add('hidden');
  quizPage.classList.remove('hidden');
  appState.currentIndex = 0; appState.score = 0;
  renderQuestion();
}

function renderQuestion(){
  const q = appState.questions[appState.currentIndex];
  questionNumber.textContent = `Soal ${appState.currentIndex+1} / ${appState.questions.length}`;
  questionText.textContent = q ? q.question : '--';
  // randomize answers
  const opts = shuffle([...(q.incorrect||[]), q.correct]);
  answersWrap.innerHTML = '';
  opts.forEach((opt,idx)=>{
    const b = document.createElement('button');
    b.className='answer-btn';
    b.textContent = `${String.fromCharCode(65+idx)}. ${opt}`;
    b.addEventListener('click',()=>selectAnswer(opt,q));
    answersWrap.appendChild(b);
  });
  // progress
  const pct = Math.round((appState.currentIndex / appState.questions.length)*100);
  progressBar.style.width = `${pct}%`;
}

function selectAnswer(selected,q){
  // disable answers
  document.querySelectorAll('.answer-btn').forEach(b=>b.disabled=true);
  const correct = selected === q.correct;
  if(correct){ appState.score++; playSfx(sfxCorrect);} else { playSfx(sfxWrong); }
  // show feedback popup
  feedbackPopup.classList.remove('hidden');
  feedbackText.textContent = correct ? 'Correct âœ…' : 'Incorrect âŒ';
  feedbackExplanation.textContent = q.explanation || '';
}

function goToNextQuestion(){
  feedbackPopup.classList.add('hidden');
  appState.currentIndex++;
  // reload ad
  reloadAd();
  if(appState.currentIndex >= appState.questions.length){
    showResults();
  } else {
    renderQuestion();
  }
}

function showResults(){
  quizPage.classList.add('hidden');
  resultsPage.classList.remove('hidden');
  resultsScore.textContent = appState.score;
  // determine message
  const s = appState.score;
  if(s<=3){ resultsTitle.textContent = 'Kamu belum siap ke Jepang...'; resultsSub.textContent='Bisa bahasa Jepang jadi lebih tenang. Ayo semangat!'; resultsEmote.textContent='ðŸ˜…'; }
  else if(s<=6){ resultsTitle.textContent='Perlu persiapan sedikit lagi!'; resultsSub.textContent='Jangan menyerah, ayo coba lagi!'; resultsEmote.textContent='ðŸ™‚'; }
  else if(s<=9){ resultsTitle.textContent='Kamu sudah siap ke Jepang!'; resultsSub.textContent='Tapi bisakah kamu dapat nilai sempurna?'; resultsEmote.textContent='ðŸ˜Ž'; }
  else { resultsTitle.textContent='Apakah kamu orang Jepang?'; resultsSub.textContent='Selamat! Nilai sempurna! Coba kategori lainnya!'; resultsEmote.textContent='ðŸ†'; }
}

function saveResultAndGoStatus(){
  const attempts = JSON.parse(localStorage.getItem('uji_attempts')||'[]');
  attempts.push({date:new Date().toISOString(),score:appState.score,level:appState.level,category:appState.category});
  localStorage.setItem('uji_attempts',JSON.stringify(attempts));
  showStatus();
}

function showStatus(){
  resultsPage.classList.add('hidden');
  quizPage.classList.add('hidden');
  settingsPage.classList.add('hidden');
  statusPage.classList.remove('hidden');
  // load attempts
  const attempts = JSON.parse(localStorage.getItem('uji_attempts')||'[]');
  attemptCount.textContent = attempts.length;
  const avg = attempts.length ? (attempts.reduce((s,a)=>s+a.score,0)/attempts.length).toFixed(2) : 0;
  averageScore.textContent = avg;
  // chart
  const labels = attempts.map(a=> (new Date(a.date)).toLocaleDateString());
  const data = attempts.map(a=>a.score);
  if(window._statusChart) window._statusChart.destroy();
  window._statusChart = new Chart(statusChartEl,{type:'line',data:{labels, datasets:[{label:'Skor',data,fill:false,tension:0.4}]},options:{scales:{y:{min:0,max:10}}}});
}

function deleteAllResults(){
  if(!confirm('Hapus semua hasil?')) return; localStorage.removeItem('uji_attempts'); showStatus();
}

function showSettings(){
  settingsPage.classList.remove('hidden');
}
function closeSettings(){
  settingsPage.classList.add('hidden');
}

function saveSettingsAndApply(){
  const theme = themeSelect.value;
  const sfx = soundSelect.value === 'on';
  const notif = notifSelect.value === 'on';
  localStorage.setItem('uji_settings', JSON.stringify({theme,sfx,notif}));
  applySettings({theme,sfx});
  goHome();
}
function loadSettings(){
  const st = JSON.parse(localStorage.getItem('uji_settings')||'{}');
  if(st.theme) { document.body.className = `theme-${st.theme}`; themeSelect.value = st.theme; }
  if(typeof st.sfx !== 'undefined') { appState.sfxOn = st.sfx; soundSelect.value = st.sfx? 'on':'off'; }
}
function applySettings(s){
  document.body.className = `theme-${s.theme}`;
  appState.sfxOn = s.sfx;
}

function reloadAd(){
  // simple visual reload of ad area
  adBar.textContent = '[Iklan] (reload ' + new Date().toLocaleTimeString() + ')';
}

// utilities
function shuffle(a){
  for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}
  return a;
}

init();




/* Small UX: close overlay if clicked */
overlay.addEventListener('click',()=>{ closeLevelModal(); });







<!-- FILE: db.json -->
{
  "belum_restoran": [
    {"question":"Bagaimana cara memesan makanan di restoran?","correct":"Saya mau pesan...","incorrect":["Tolong ambil","Berapa harganya","Saya tidak tahu"],"explanation":"Gunakan 'Saya mau pesan...' untuk memesan."},
    {"question":"Jika makanan terlalu panas, apa yang bisa kamu katakan?","correct":"Mohon ditunggu sebentar","incorrect":["Terima kasih","Selamat","Saya lapar"],"explanation":"'Mohon ditunggu sebentar' biasa dipakai."}
  ],
  "belum_minimarket": [
    {"question":"Bagaimana bilang 'berapa harganya'?","correct":"Berapa harganya?","incorrect":["Tolong bayar","Saya mau beli","Maaf"],"explanation":"'Berapa harganya' langsung ke intinya."}
  ],
  "belum_kereta": [
    {"question":"Bagaimana menanyakan tujuan di stasiun?","correct":"Stasiun ini ke mana?","incorrect":["Dimana toilet","Saya turun","Tolong"],"explanation":"Tanyakan tujuan stasiun."}
  ],
  "belum_rumah-sakit": [
    {"question":"Kalau sakit bagaimana ucapkan?","correct":"Saya sakit","incorrect":["Saya sehat","Saya lapar","Saya capek"],"explanation":"'Saya sakit' paling jelas."}
  ],
  "pernah_restoran": [
    {"question":"Bagaimana minta menu rekomendasi?","correct":"Ada rekomendasi?","incorrect":["Mana pintu?","Berapa orang?","Tolong tunjukkan"] ,"explanation":"Tanyakan rekomendasi kepada pelayan."}
  ],
  "pernah_minimarket": [
    {"question":"Bagaimana minta kantong?","correct":"Kantong, tolong","incorrect":["Tolong bayar","Saya mau pulang","Terima kasih"],"explanation":"'Kantong, tolong' biasa dipakai."}
  ],
  "pernah_kereta": [
    {"question":"Bagaimana tanya jam keberangkatan?","correct":"Jam berapa kereta?","incorrect":["Di mana loket?","Saya terlambat","Tolong bantu"],"explanation":"Tanyakan jam kereta secara langsung."}
  ],
  "pernah_rumah-sakit": [
    {"question":"Bagaimana bilang ada alergi?","correct":"Saya alergi...","incorrect":["Saya sakit demam","Saya sehat","Saya lelah"],"explanation":"Sebutkan alergi agar diperhatikan."}
  ],
  "sering_restoran": [
    {"question":"Bagaimana pesan tanpa nasi?","correct":"Tanpa nasi, tolong","incorrect":["Banyak nasi","Saya mau nasi","Tidak ada nasi"],"explanation":"Sebutkan permintaan khusus makanan."}
  ],
  "sering_minimarket": [
    {"question":"Bagaimana mengucap terima kasih halus?","correct":"Terima kasih banyak","incorrect":["Sampai jumpa","Permisi","Maaf"],"explanation":"Gunakan untuk menunjukkan apresiasi."}
  ],
  "sering_kereta": [
    {"question":"Bagaimana ucap 'maaf saya turun di sini'?","correct":"Saya turun di sini, mohon maaf","incorrect":["Saya tidak tau","Terima kasih","Tolong hentikan"],"explanation":"Sopan meminta berhenti."}
  ],
  "sering_rumah-sakit": [
    {"question":"Bagaimana minta resep yang sama?","correct":"Saya mau resep yang sama seperti sebelumnya","incorrect":["Saya sudah baik","Tidak perlu resep","Saya alergi"],"explanation":"Meminta resep lama membantu apoteker."}
  ]
}
